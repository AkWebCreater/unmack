{{ 'customer.css' | asset_url | stylesheet_tag }}

<div class="main-body page-width">
  <div class="customer account">
    <div>
      <h1>{{ 'customer.account.title' | t }}</h1>
    </div>
  </div>
  {% include 'breadcrumbs' %}
  <div class="account-wrapper customer account">
    <div class="account-header">
      <div class="logo"></div>
      <div class="account-detail">
        <span>Welcome</span>
        <h2 class="h2 account-name accent">{{customer.first_name}}</h2>
        <span class="email">{{customer.email}}</span>
      </div>
      <div class="logout">
        <a href="{{ routes.account_logout_url }}">
          <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" fill="none" viewBox="0 0 18 19">
            <path fill-rule="evenodd" clip-rule="evenodd" d="M6 4.5a3 3 0 116 0 3 3 0 01-6 0zm3-4a4 4 0 100 8 4 4 0 000-8zm5.58 12.15c1.12.82 1.83 2.24 1.91 4.85H1.51c.08-2.6.79-4.03 1.9-4.85C4.66 11.75 6.5 11.5 9 11.5s4.35.26 5.58 1.15zM9 10.5c-2.5 0-4.65.24-6.17 1.35C1.27 12.98.5 14.93.5 18v.5h17V18c0-3.07-.77-5.02-2.33-6.15-1.52-1.1-3.67-1.35-6.17-1.35z" fill="currentColor">
          </svg>
          {{ 'customer.log_out' | t }}
        </a>
      </div>
    </div>
    <div class="account-body">
      <div class="account-sidebar">
        <div class="order-history" data-popup-name="order-history">
          <span>Order History</span>
        </div>
        <div class="profile" data-popup-name="profile">
          <span>Profile</span>
        </div>
        <div class="social-login" data-popup-name="social-login">
          <span>Social Login</span>
        </div>
        <div class="change-password" data-popup-name="change-password">
          <span class="">Change Password</span>
        </div>
        <div class="wishlist" data-popup-name="wishlist">
          <span>Wishlist</span>
        </div>
        <div class="gift-card" data-popup-name="gift-card">
          <span>Gift Card</span>
        </div>
        <div class="wallet" data-popup-name="wallet">
          <span>Wallet</span>
        </div>
        <div class="whatsapp" data-popup-name="whatsapp">
          <span>Wahtsapp</span>
        </div>
      </div>
      <div class="account-main-body">
        <div class="popup open" data-popup="order-history">
          <div class="popup-header accent">
            <h2>{{ 'customer.orders.title' | t }}</h2>
          </div>
          <div class="popup-body">
            {% paginate customer.orders by customer.orders.size %}
            {%- if customer.orders.size > 0 -%}
              <table role="table" class="order-history">
                <caption class="visually-hidden">{{ 'customer.orders.title' | t }}</caption>
                <thead role="rowgroup">
                  <tr role="row">
                    <th id="ColumnOrder" scope="col" role="columnheader">{{ 'customer.orders.order_number' | t }}</th>
                    <th id="ColumnDate" scope="col" role="columnheader">{{ 'customer.orders.date' | t }}</th>
                    <th id="ColumnPayment" scope="col" role="columnheader">{{ 'customer.orders.payment_status' | t }}</th>
                    <th id="ColumnFulfillment" scope="col" role="columnheader">{{ 'customer.orders.fulfillment_status' | t }}</th>
                    <th id="ColumnTotal" scope="col" role="columnheader">{{ 'customer.orders.total' | t }}</th>
                  </tr>
                </thead>
                <tbody role="rowgroup">
                  {%- for order in customer.orders -%}
                    <tr role="row">
                      <td
                        id="RowOrder"
                        role="cell"
                        headers="ColumnOrder"
                        data-label="{{ 'customer.orders.order_number' | t }}"
                      >
                        <a href="{{ order.customer_url }}" aria-label="{{ 'customer.orders.order_number_link' | t: number: order.name }}">
                          {{ order.name }}
                        </a>
                      </td>
                      <td headers="RowOrder ColumnDate" role="cell" data-label="{{ 'customer.orders.date' | t }}">
                        {{ order.created_at | time_tag: format: 'date' }}
                      </td>
                      <td headers="RowOrder ColumnPayment" role="cell" data-label="{{ 'customer.orders.payment_status' | t }}">
                        {{ order.financial_status_label }}
                      </td>
                      <td headers="RowOrder ColumnFulfillment" role="cell" data-label="{{ 'customer.orders.fulfillment_status' | t }}">
                        {{ order.fulfillment_status_label }}
                      </td>
                      <td headers="RowOrder ColumnTotal" role="cell" data-label="{{ 'customer.orders.total' | t }}">
                        {{ order.total_price | money_with_currency }}</td>
                    </tr>
                  {%- endfor -%}
                </tbody>
              </table>
            {%- else -%}
              <p>{{ 'customer.orders.none' | t }}</p>
            {%- endif -%}
          {% endpaginate %}
          </div>
        </div>
        <div class="popup" data-popup="change-password">
          {{ 'customer.css' | asset_url | stylesheet_tag }}
          <div class="popup-header accent">
            <h2 class="h2">
              Change Password 
            </h2>
          </div>
          <div class="popup-body">
            <div class="customer reset-password">
              <svg style="display: none">
                <symbol id="icon-error" viewBox="0 0 13 13">
                  <circle cx="6.5" cy="6.50049" r="5.5" stroke="white" stroke-width="2"/>
                  <circle cx="6.5" cy="6.5" r="5.5" fill="#EB001B" stroke="#EB001B" stroke-width="0.7"/>
                  <path d="M5.87413 3.52832L5.97439 7.57216H7.02713L7.12739 3.52832H5.87413ZM6.50076 9.66091C6.88091 9.66091 7.18169 9.37267 7.18169 9.00504C7.18169 8.63742 6.88091 8.34917 6.50076 8.34917C6.12061 8.34917 5.81982 8.63742 5.81982 9.00504C5.81982 9.37267 6.12061 9.66091 6.50076 9.66091Z" fill="white"/>
                  <path d="M5.87413 3.17832H5.51535L5.52424 3.537L5.6245 7.58083L5.63296 7.92216H5.97439H7.02713H7.36856L7.37702 7.58083L7.47728 3.537L7.48617 3.17832H7.12739H5.87413ZM6.50076 10.0109C7.06121 10.0109 7.5317 9.57872 7.5317 9.00504C7.5317 8.43137 7.06121 7.99918 6.50076 7.99918C5.94031 7.99918 5.46982 8.43137 5.46982 9.00504C5.46982 9.57872 5.94031 10.0109 6.50076 10.0109Z" fill="white" stroke="#EB001B" stroke-width="0.7">
                </symbol>
              </svg>
              <h2 class="h2">
                {{ 'customer.reset_password.title' | t }}
              </h2>
              <p>
                {{ 'customer.reset_password.subtext' | t: email: email }}
              </p>
              {%- form 'reset_customer_password' -%}
                {%- if form.errors -%}
                  <h2 class="form__message" tabindex="-1" autofocus>
                    <span class="visually-hidden">{{ 'accessibility.error' | t }} </span>
                    <svg aria-hidden="true" focusable="false" role="presentation">
                      <use href="#icon-error" />
                    </svg>
                    {{ 'templates.contact.form.error_heading' | t }}
                  </h2>
                  <ul>
                    {%- for field in form.errors -%}
                      <li>
                        {%- if field == 'form' -%}
                          {{ form.errors.messages[field] }}
                        {%- else -%}
                          <a href="#{{ field }}">
                            {{ form.errors.translated_fields[field] | capitalize }}
                            {{ form.errors.messages[field] }}
                          </a>
                        {%- endif -%}
                      </li>
                    {%- endfor -%}
                  </ul>
                {%- endif -%}
  
                <div class="field">      
                  <input
                    type="password"
                    name="customer[password]"
                    id="password"
                    autocomplete="new-password"
                    {% if form.errors contains 'password' %}
                      aria-invalid="true"
                      aria-describedby="password-error"
                    {% endif %}
                    placeholder="{{ 'customer.reset_password.password' | t }}"
                  >
                  <label for="password">
                    {{ 'customer.reset_password.password' | t }}
                  </label>
                  {%- if form.errors contains 'password' -%}
                    <small id="password-error" class="form__message">
                      <svg aria-hidden="true" focusable="false" role="presentation">
                        <use href="#icon-error" />
                      </svg>
                      {{ form.errors.translated_fields['password'] | capitalize }} {{ form.errors.messages['password'] }}
                    </small>
                  {%- endif -%}
                </div>
  
                <div class="field">      
                  <input
                    type="password"
                    name="customer[password_confirmation]"
                    id="password_confirmation"
                    autocomplete="new-password"
                    {% if form.errors contains 'password_confirmation' %}
                      aria-invalid="true"
                      aria-describedby="password_confirmation-error"
                    {% endif %}
                    placeholder="{{ 'customer.reset_password.password_confirm' | t }}"
                  >
                  <label for="password_confirmation">
                    {{ 'customer.reset_password.password_confirm' | t }}
                  </label>
                  {%- if form.errors contains 'password_confirmation' -%}
                    <small id="password_confirmation-error" class="form__message">
                      <svg aria-hidden="true" focusable="false" role="presentation">
                        <use href="#icon-error" />
                      </svg>
                      {{ form.errors.translated_fields['password_confirmation'] | capitalize }} {{ form.errors.messages['password_confirmation'] }}
                    </small>
                  {%- endif -%}
                </div>
  
                <button>
                  {{ 'customer.reset_password.submit' | t }}
                </button>
              {%- endform -%}
            </div>
          </div>
        </div>
        <div class="popup" data-popup="profile">
          <div class="popup-header accent">
            <h2 class="h2">Basic Information</h2>
          </div>
          <div class="popup-body">
            <div class="info">
              <span class="lable">Name </span>
              <span class="details">{{customer.first_name}}</span>
            </div>
            <div class="info">
              <span class="lable">Email </span>
              <span class="details">{{customer.email}}</span>
            </div>
            <div class="info">
              <span class="lable">Contact No </span>
              <span class="details">{{customer.phone}}</span>
            </div>
            <div class="info">
              <span class="lable">Default Adderess </span>
              <span class="details">{{customer.default_address}}</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
